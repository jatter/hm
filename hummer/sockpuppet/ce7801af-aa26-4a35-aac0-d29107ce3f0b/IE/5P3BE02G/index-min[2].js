define("/mm/tb-page-peel/0.0.5/index",["node","io"],function(e){var i=KISSY,t=e("node").all,a=e("io"),l="baping-page-peel";KISSY.UA.ie&&KISSY.UA.ie<9||i.ready(function(){new a({dataType:"jsonp",url:"https://ecpm.tanx.com/ex",data:{i:"mm_12852562_1778064_69476187"},jsonp:"cb",complete:function(e){if(e&&e.tmpl){var a=i.parseJson(e.tmpl);a.large1=a.banner1.large,a.large2=a.banner2.large,a.large3=a.banner3.large,a.small1=a.banner1.small,a.small2=a.banner2.small,a.small3=a.banner3.small,a.clickurl=e.clickurl+"&rd="+encodeURIComponent(a.clickurl.replace(/#__c(\w+)$/,"$1"));var h='<div class="page-peel-box"><div class="triangle"></div><div class="svg-box"><svg class="svg-small"><a class="svg-images" xlink:href="{clickurl}" target="_blank"><image class="small" transform="translate(160)" width="40" height="40" xlink:href="{small3}" /><image class="large" width="100%" height="100%" xlink:href="{large3}" /></a></svg><svg class="svg-medium"><a class="svg-images" xlink:href="{clickurl}" target="_blank"><image class="small" transform="translate(160)" width="80" height="80" xlink:href="{small2}" /><image class="large" width="100%" height="100%" xlink:href="{large2}" /></a></svg><svg class="svg-big"><a class="svg-images" xlink:href="{clickurl}" target="_blank"><image class="small" transform="translate(180)" width="120" height="120" xlink:href="{small1}" /><image class="large" width="100%" height="100%" xlink:href="{large1}" /></a></svg><svg width="0" height="0"><defs><clipPath id="clip-triangle" clipPathUnits="objectBoundingBox"><polygon points="100 0, 0 0, 100 100" /></clipPath></defs></svg></div></div>'.replace(/class="/g,'class="'+l+"-");h=h.replace(/\{(\w+?)\}/g,function(e,i){return a[i].replace(/^http:/,"")});var g='.page-peel-box {position: absolute;top: 36px;right: 0;z-index: 10002;}.svg-box, .svg-small, svg-medium, .svg-big, .svg-images image {clip-path: url(#clip-triangle);-webkit-clip-path: polygon(100% 0, 0 0, 100% 100%);clip-path: polygon(100% 0, 0 0, 100% 100%);}.svg-box, .triangle {position: absolute;transition-duration: .3s;transition-timing-function: cubic-bezier(.25, .46, .45, .94);}.svg-box {top: 0;right: 0;overflow: hidden;transform: translateZ(0);transition-property: width, height;}.triangle:after {content: "";position: absolute;width: 0;height: 0;border-style: solid;border-color: transparent transparent transparent #e5e5e5;transition: inherit;}.svg-small, .svg-medium, .svg-big {overflow: hidden;position: absolute;top: 0;right: 0;}.svg-images image {transition-duration: .3s;transition-timing-function: inherit;}.large {opacity: 0;}.hover .small {opacity: 0;}.hover .large {opacity: 1;}@media (min-width: 1070px) and (max-width: 1149px), (min-width: 1270px) and (max-width: 1349px) {.page-peel-box {width: 40px;height: 40px;}.page-peel-box.hover {width: 200px;height: 200px;}.svg-small {width: 200px;height: 200px;}.svg-medium, .svg-big {display: none;}.triangle {top: 12px;right: 12px;width: 15px;height: 15px;}.hover .svg-box {width: 200px;height: 200px;}.hover .triangle {right: 79px;top: 79px;width: 40px;height: 40px;}.triangle:after {border-width: 15px 0 0 15px;}.hover .triangle:after {border-width: 40px 0 0 40px;}.svg-images .large {width: 200px;height: 200px;}.svg-box {width: 40px;height: 40px;}}@media (min-width: 1150px) and (max-width: 1189px), (min-width: 1350px) and (max-width: 1489px) {.page-peel-box {width: 80px;height: 80px;}.page-peel-box.hover {width: 240px;height: 240px;}.svg-medium {width: 240px;height: 240px;}.svg-small, .svg-big {display: none;}.triangle {top: 25px;right: 25px;width: 25px;height: 25px;}.hover .svg-box {width: 240px;height: 240px;}.hover .triangle {right: 94px;top: 94px;width: 50px;height: 50px;}.triangle:after {border-width: 25px 0 0 25px;}.hover .triangle:after {border-width: 50px 0 0 50px;}.svg-images .large {width: 240px;height: 240px;}.svg-box {width: 80px;height: 80px;}}@media (min-width: 1490px) {.page-peel-box {width: 120px;height: 120px;}.page-peel-box.hover {width: 300px;height: 300px;}.svg-big {width: 300px;height: 300px;}.svg-small, .svg-medium {display: none;}.triangle {top: 40px;right: 40px;width: 35px;height: 35px;}.hover .svg-box {width: 300px;height: 300px;}.hover .triangle {right: 120px;top: 120px;width: 59px;height: 59px;}.triangle:after {border-width: 38px 0 0 38px;}.hover .triangle:after {border-width: 60px 0 0 60px;}.svg-images .large {width: 300px;height: 300px;}.svg-box {width: 120px;height: 120px;}}'.replace(/\.(?=[a-z])/g,"."+l+"-");t(document.body).append("<style>"+g+"</style>"+h);var p,r=t("."+l+"-page-peel-box");r.on("mousemove",function(e){var i=r.offset(),a=i.left,h=i.top,g=r.width(),s=r.height(),o=[a,-h-s],n=[a+g,-h],x=[e.clientX,-e.clientY],d=Math.sqrt(Math.pow(x[0]-o[0],2)+Math.pow(x[1]-o[1],2)),m=Math.sqrt(Math.pow(x[0]-n[0],2)+Math.pow(x[1]-n[1],2)),v=d-m>0;v?(p||(p=!0,goldlog.record("/yybp.taobao_tear.2","CLK","","H46985942")),t(this).addClass(l+"-hover")):t(this).removeClass(l+"-hover")}).on("mouseleave",function(e){t(this).removeClass(l+"-hover")}).on("click",function(e){goldlog.record("/yybp.taobao_tear.3","CLK","","H46985943")})}}})})});
